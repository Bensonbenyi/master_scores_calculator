<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç”Ÿä¿¡æ¯</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/stu_info.css') }}">
</head>
<body>
    <div class="info-container">
        <h1 class="info-title">å­¦ç”Ÿä¿¡æ¯è¯¦æƒ…</h1>
        <p class="welcome-text">æ¬¢è¿ä½ ï¼Œ{{ username }}ï¼</p>
        
        <div class="info-section">
            <h2>ä¸ªäººåŸºæœ¬ä¿¡æ¯</h2>
            <table class="info-table">
                <tr>
                    <th>å§“å</th>
                    <td>{{ user.full_name if user.full_name else 'æœªå¡«å†™' }}</td>
                </tr>
                <tr>
                    <th>å­¦å·</th>
                    <td>{{ user.student_id if user.student_id else 'æœªå¡«å†™' }}</td>
                </tr>
                <tr>
                    <th>ä¸“ä¸š</th>
                    <td>{{ user.major if user.major else 'æœªå¡«å†™' }}</td>
                </tr>
            </table>
        </div>
        
        <div class="info-section">
            <h2>æˆç»©ç»Ÿè®¡</h2>
            <table class="score-table">
                <tr class="table-header">
                    <th colspan="2">é¡¹ç›®</th>
                    <th>å¾—åˆ†</th>
                </tr>
                <tr class="main-category">
                    <td colspan="2">å­¦ä¸šç»¼åˆæˆç»© (80%)</td>
                    <td>{{ academic_weighted|default(0)|float }}</td>
                </tr>
                <tr class="main-category">
                    <td colspan="2">è€ƒæ ¸ç»¼åˆæˆç»© (20%)</td>
                    <td>{{ (academic_talent_weighted|default(0)|float) + (comprehensive_weighted|default(0)|float) }}</td>
                </tr>
                <tr class="sub-category">
                    <td colspan="2">- å­¦æœ¯ä¸“é•¿æˆç»© (12%)</td>
                    <td>{{ academic_talent_weighted|default(0)|float }}</td>
                </tr>
                {% if academic_talent_details %}
                    {% for item in academic_talent_details %}
                    <tr class="detail-item">
                        <td></td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.score }}</td>
                    </tr>
                    {% endfor %}
                {% endif %}
                <tr class="sub-category">
                    <td colspan="2">- ç»¼åˆè¡¨ç°åŠ åˆ† (8%)</td>
                    <td>{{ comprehensive_weighted|default(0)|float }}</td>
                </tr>
                {% if comprehensive_details %}
                    {% for item in comprehensive_details %}
                    <tr class="detail-item">
                        <td></td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.score }}</td>
                    </tr>
                    {% endfor %}
                {% endif %}
                <tr class="total-score">
                    <td colspan="2">æ€»åˆ†</td>
                    <td>{{ final_score|default(0)|float }}</td>
                </tr>
            </table>
        </div>
        
        <div class="info-section">
            <h2>è¯æ˜ææ–™</h2>
            <div class="files-container">
                {% if uploaded_files %}
                    {% for file in uploaded_files %}
                    <div class="file-item">
                        <a href="{{ url_for('static', filename=file) }}" target="_blank" class="file-link">
                            {% if file.endswith('.jpg') or file.endswith('.jpeg') or file.endswith('.png') or file.endswith('.gif') %}
                                <img src="{{ url_for('static', filename=file) }}" alt="è¯æ˜ææ–™" class="file-thumbnail">
                            {% else %}
                                <div class="file-icon">ğŸ“„</div>
                            {% endif %}
                            <span class="file-name">{{ file.split('/')[-1] }}</span>
                        </a>
                    </div>
                    {% endfor %}
                {% else %}
                    <p class="no-files">æš‚æ— ä¸Šä¼ çš„è¯æ˜ææ–™</p>
                {% endif %}
            </div>
        </div>
        
        <div class="navigation-links">
            <a href="{{ url_for('transition_page') }}" class="nav-link">è¿”å›é€‰æ‹©é¡µé¢</a>
            <a href="{{ url_for('student_page') }}" class="nav-link">å‰å¾€æˆç»©è®¡ç®—</a>
            <a href="{{ url_for('logout') }}" class="logout-link">é€€å‡ºç™»å½•</a>
        </div>
    </div>
</body>
</html>
